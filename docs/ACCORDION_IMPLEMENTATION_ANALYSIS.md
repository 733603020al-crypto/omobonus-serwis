# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞

–ê–∫–∫–æ—Ä–¥–µ–æ–Ω –∏–º–µ–µ—Ç **–¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É**:
1. **–í–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å**: –°–µ–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Naprawy i us≈Çugi serwisowe (opcjonalne)")
2. **–í–ª–æ–∂–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å**: –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ "naprawy" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Oprogramowanie i konfiguracja", "Mechanizm uderzeniowy..." –∏ —Ç.–¥.)

---

## 1Ô∏è‚É£ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –û–¢–ö–†–´–¢–ò–ò –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### 1.1 –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è

**–ú–µ—Å—Ç–æ:** `handleSubcategoryChange` (—Å—Ç—Ä–æ–∫–∞ ~1594-1644)

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ `AccordionTrigger` –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. Radix UI Accordion –≤—ã–∑—ã–≤–∞–µ—Ç `onValueChange` —Å ID –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleSubcategoryChange(sectionId, value)`, –≥–¥–µ:
   - `sectionId = 'naprawy'`
   - `value = ID –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "oprogramowanie")

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `handleSubcategoryChange`:**
```typescript
const prevValue = openSubcategory  // –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (null, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–∫—Ä—ã—Ç–æ)
const isClosing = prevValue !== null && value === null
const isOpening = prevValue === null && value !== null

// –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (isOpening = true):
// - –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (—ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è)
// - –°—Ä–∞–∑—É –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è setOpenSubcategory(prev => (prev === value ? null : value))
```

### 1.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è React

**–í—ã–∑–æ–≤:** `setOpenSubcategory(prev => (prev === value ? null : value))`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `openSubcategory` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å `null` –Ω–∞ ID –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- React –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 1.3 –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Accordion (Radix UI)

**–ú–µ—Å—Ç–æ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Accordion` (—Å—Ç—Ä–æ–∫–∞ ~3342-3350)

```typescript
<Accordion
  type="single"        // –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  collapsible          // –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å, –∫–ª–∏–∫–Ω—É–≤ –Ω–∞ –Ω–µ—ë —Å–Ω–æ–≤–∞
  value={getSubcategoryValue(section.id)}  // –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: openSubcategory –∏–ª–∏ undefined
  onValueChange={value => handleSubcategoryChange(section.id, value)}
  className="w-full"
>
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Radix UI:**
- Radix UI –æ–±–Ω–æ–≤–ª—è–µ—Ç `data-state` –∞—Ç—Ä–∏–±—É—Ç –Ω–∞ `AccordionItem` —Å `closed` –Ω–∞ `open`
- –≠—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç CSS-–∞–Ω–∏–º–∞—Ü–∏—é —Ä–∞—Å–∫—Ä—ã—Ç–∏—è

### 1.4 CSS –∞–Ω–∏–º–∞—Ü–∏—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è

**–ú–µ—Å—Ç–æ:** `AccordionContent` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (src/components/ui/accordion.tsx, —Å—Ç—Ä–æ–∫–∞ 58)

```typescript
className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ `data-state="open"` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `animate-accordion-down`
- –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è shadcn/ui/Tailwind CSS
- **–í—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏:** ~200-300ms (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è Radix UI Accordion)

**–í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–ª–∞–≤–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–Ω–∏–∑
- –í—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç 0 –¥–æ –ø–æ–ª–Ω–æ–π –≤—ã—Å–æ—Ç—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 1.5 JavaScript –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–ú–µ—Å—Ç–æ:** `useEffect` –¥–ª—è `openSubcategory` (—Å—Ç—Ä–æ–∫–∞ ~1681-1841)

**–£—Å–ª–æ–≤–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:**
```typescript
if (!openSubcategory || openSection !== 'naprawy') {
  // –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –Ω–æ –ù–ï –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
  return
}

// –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è:
const sectionRef = sectionRefs.current['naprawy']
const subcategoryRef = subcategoryRefs.current[openSubcategory]

// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
scrollSubcategoryToTop(sectionRef, subcategoryRef, SECTION_SCROLL_OFFSET)
```

### 1.6 –§—É–Ω–∫—Ü–∏—è `scrollSubcategoryToTop`

**–ú–µ—Å—Ç–æ:** —Å—Ç—Ä–æ–∫–∞ ~1233-1310

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏:**
   ```typescript
   requestAnimationFrame(() => {
     requestAnimationFrame(() => {
       setTimeout(() => {
         // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
       }, 100) // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CSS-–∞–Ω–∏–º–∞—Ü–∏–∏ Radix UI
     })
   })
   ```
   **–ò—Ç–æ–≥–æ:** ~2 RAF –∫–∞–¥—Ä–∞ + 100ms = ~116-133ms –∑–∞–¥–µ—Ä–∂–∫–∞

2. **–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (window):**
   ```typescript
   const sectionRect = sectionRef.getBoundingClientRect()
   const needsPageScroll = Math.abs(sectionRect.top - SECTION_SCROLL_OFFSET) > 20
   
   if (needsPageScroll) {
     window.scrollTo({ 
       top: sectionRect.top + window.scrollY - SECTION_SCROLL_OFFSET, 
       behavior: 'smooth'  // ‚ö†Ô∏è –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
     })
   }
   ```
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (120px –æ—Ç –≤–µ—Ä—Ö–∞)
   - –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–∞–≤–Ω–æ (`behavior: 'smooth'`)
   - `SECTION_SCROLL_OFFSET = 120px`

3. **–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å overflow-y-auto:**
   ```typescript
   // –ù–∞—Ö–æ–¥–∏—Ç—Å—è scrollable –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π div —Å overflow-y-auto)
   const scrollableContainer = findScrollableContainer(accordionContentElement)
   
   // –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   const relativeTop = subcategoryTriggerRect.top - containerRect.top
   const targetScrollTop = currentScrollTop + relativeTop - 10
   
   // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   scrollableContainer.scrollTo({
     top: targetScrollTop,
     behavior: 'smooth'  // ‚ö†Ô∏è –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
   })
   ```
   - –ï—Å–ª–∏ –±—ã–ª–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 200ms (—á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
   - –ï—Å–ª–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –±—ã–ª–æ - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏.

---

## 2Ô∏è‚É£ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ó–ê–ö–†–´–¢–ò–ò –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### 2.1 –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ú–µ—Å—Ç–æ:** `handleSubcategoryChange` (—Å—Ç—Ä–æ–∫–∞ ~1594-1644)

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—É—é –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é
2. Radix UI Accordion –≤—ã–∑—ã–≤–∞–µ—Ç `onValueChange` —Å `null` (—Ç–∞–∫ –∫–∞–∫ `type="single"` –∏ `collapsible`)
3. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleSubcategoryChange(sectionId, null)`, –≥–¥–µ:
   - `sectionId = 'naprawy'`
   - `value = null`

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `handleSubcategoryChange`:**
```typescript
const prevValue = openSubcategory  // –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (ID –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
const isClosing = prevValue !== null && value === null  // true

// –ï—Å–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (isClosing = true && openSection === 'naprawy'):
if (isClosing && openSection === 'naprawy') {
  // ‚ö†Ô∏è –í–ê–ñ–ù–û: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
  
  // 1. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  const pageScroll = window.scrollY
  
  // 2. –ù–∞—Ö–æ–¥–∏—Ç—Å—è scrollable –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –µ–≥–æ scrollTop
  const scrollableContainer = findScrollableContainer(accordionContentElement)
  const containerScroll = scrollableContainer.scrollTop
  
  // 3. –ü–æ–∑–∏—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ ref
  scrollPositionOnCloseRef.current = { pageScroll, containerScroll }
}
```

**–ó–∞—Ç–µ–º:**
```typescript
// –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–û–°–õ–ï —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
setOpenSubcategory(prev => (prev === value ? null : value))
```

### 2.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è React

**–í—ã–∑–æ–≤:** `setOpenSubcategory(prev => (prev === value ? null : value))`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `openSubcategory` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å ID –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ `null`
- React –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 2.3 –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Accordion (Radix UI)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Radix UI:**
- Radix UI –æ–±–Ω–æ–≤–ª—è–µ—Ç `data-state` –∞—Ç—Ä–∏–±—É—Ç –Ω–∞ `AccordionItem` —Å `open` –Ω–∞ `closed`
- –≠—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç CSS-–∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–∫—Ä—ã—Ç–∏—è

### 2.4 CSS –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è

**–ú–µ—Å—Ç–æ:** `AccordionContent` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
className="data-[state=closed]:animate-accordion-up ..."
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ `data-state="closed"` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `animate-accordion-up`
- **–í—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏:** ~200-300ms
- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–ª–∞–≤–Ω–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö
- –í—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –æ—Ç –ø–æ–ª–Ω–æ–π –≤—ã—Å–æ—Ç—ã –¥–æ 0

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –í–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –≤—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –±—Ä–∞—É–∑–µ—Ä–æ–º.

### 2.5 JavaScript –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏

**–ú–µ—Å—Ç–æ:** `useEffect` –¥–ª—è `openSubcategory` (—Å—Ç—Ä–æ–∫–∞ ~1681-1841)

**–£—Å–ª–æ–≤–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:**
```typescript
if (openSubcategory === null && openSection === 'naprawy' && scrollPositionOnCloseRef.current) {
  // –õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
}
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

1. **–ó–∞–ø—É—Å–∫ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏:**
   ```typescript
   const lockScrollPosition = () => {
     // –ö–∞–∂–¥—ã–µ 16ms –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
     if (Math.abs(window.scrollY - savedPositions.pageScroll) > 1) {
       window.scrollTo({ top: savedPositions.pageScroll, behavior: 'auto' })
     }
     // –¢–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è scrollTop –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   }
   
   scrollLockIntervalRef.current = window.setInterval(lockScrollPosition, 16)
   ```
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª –∫–∞–∂–¥—ã–µ 16ms (60 FPS)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 1px
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (`behavior: 'auto'`)

2. **–§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏:**
   ```typescript
   setTimeout(() => {
     // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª
     clearInterval(scrollLockIntervalRef.current)
     
     // –§–∏–Ω–∞–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è
     window.scrollTo({ top: finalPositions.pageScroll, behavior: 'auto' })
     scrollableContainer.scrollTop = finalPositions.containerScroll
     
     // –û—á–∏—â–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
     scrollPositionOnCloseRef.current = null
   }, 350) // –ó–∞–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ (200-300ms)
   ```

---

## 3Ô∏è‚É£ –õ–æ–≥–∏–∫–∞, –≤–ª–∏—è—é—â–∞—è –Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫—É

### 3.1 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–ú–µ—Å—Ç–æ:** `handleSubcategoryChange` (—Å—Ç—Ä–æ–∫–∞ ~1610-1631)

**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- `window.scrollY` - –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `scrollableContainer.scrollTop` - –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å `overflow-y-auto`

**–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è:**
- `scrollPositionOnCloseRef.current = { pageScroll, containerScroll }`

### 3.2 –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–ú–µ—Å—Ç–æ:** `useEffect` –¥–ª—è `openSubcategory` (—Å—Ç—Ä–æ–∫–∞ ~1709-1748)

**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ê–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ:** `setInterval` –∫–∞–∂–¥—ã–µ 16ms –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é
- **–§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:** —á–µ—Ä–µ–∑ 350ms –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏)

**–ú–µ—Ç–æ–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- `window.scrollTo({ top, behavior: 'auto' })` - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- `scrollableContainer.scrollTop = value` - –ø—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

### 3.3 –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏

**–ú–µ—Å—Ç–æ:** `scrollSubcategoryToTop` (—Å—Ç—Ä–æ–∫–∞ ~1233-1310)

**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CSS-–∞–Ω–∏–º–∞—Ü–∏–∏

**–ú–µ—Ç–æ–¥—ã:**
- `window.scrollTo({ top, behavior: 'smooth' })` - –ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `scrollableContainer.scrollTo({ top, behavior: 'smooth' })` - –ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 3.4 scrollIntoViewIfNeeded

**–ú–µ—Å—Ç–æ:** —Å—Ç—Ä–æ–∫–∞ ~1185-1208

**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ–∫—Ü–∏–π (–≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å), –Ω–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
useEffect(() => {
  if (!openSection) return
  scrollIntoViewIfNeeded(sectionRefs.current[openSection], SECTION_SCROLL_OFFSET)
}, [openSection])
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `behavior: 'smooth'` –∏ –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –ª–æ–≥–∏–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π, –µ—Å–ª–∏ —Å–µ–∫—Ü–∏—è —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞.

---

## 4Ô∏è‚É£ –§—É–Ω–∫—Ü–∏—è, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –≤–∏–∑—É–∞–ª—å–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é

### 4.1 CSS –∞–Ω–∏–º–∞—Ü–∏–∏ (Radix UI Accordion)

**–ú–µ—Å—Ç–æ:** `src/components/ui/accordion.tsx` (—Å—Ç—Ä–æ–∫–∞ 58)

```typescript
className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
```

**–ö–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–∏:**
- `animate-accordion-down` - –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (`data-state="open"`)
- `animate-accordion-up` - –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ (`data-state="closed"`)

**–ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã:**
- –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã Tailwind CSS –∏–∑ shadcn/ui
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Tailwind (–≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ `tailwind.config.ts`)
- –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ CSS transitions –∏ transforms

**–í—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—Ä–µ–º—è Radix UI Accordion: ~200-300ms
- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–ª–∞–≤–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è

### 4.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CSS transition

**–ú–µ—Å—Ç–æ:** `AccordionTrigger` (—Å—Ç—Ä–æ–∫–∞ 38)

```typescript
className="... transition-all ... [&[data-state=open]>svg]:rotate-180"
```

**–≠—Ñ—Ñ–µ–∫—Ç—ã:**
- `transition-all` - –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Å–≤–æ–π—Å—Ç–≤
- –ü–æ–≤–æ—Ä–æ—Ç –∏–∫–æ–Ω–∫–∏ ChevronDownIcon –Ω–∞ 180¬∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (—á–µ—Ä–µ–∑ `transition-transform duration-200`)

---

## 5Ô∏è‚É£ –≠—Ñ—Ñ–µ–∫—Ç—ã –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è, –ø–ª–∞–≤–Ω–æ—Å—Ç–∏, –ø–æ–¥—Å–≤–µ—Ç–∫–∏

### 5.1 CSS —Å—Ç–∏–ª–∏ –¥–ª—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞

**–ú–µ—Å—Ç–æ:** `src/app/globals.css` (—Å—Ç—Ä–æ–∫–∞ ~675-733)

**–ó–∞–∫—Ä—ã—Ç—ã–µ –±–ª–æ–∫–∏** (`[data-slot="accordion-item"] > div`):
```css
background-image: 
  linear-gradient(
    to bottom,
    rgba(60, 45, 25, 0.45) 0%,
    rgba(55, 38, 20, 0.80) 100%
  ),
  url('/images/services-background.png');
box-shadow: 
  0 4px 12px rgba(0, 0, 0, 0.4),
  0 2px 6px rgba(0, 0, 0, 0.3),
  inset 0 1px 0 rgba(255, 245, 200, 0.1),
  inset 0 -1px 0 rgba(0, 0, 0, 0.2);
```
- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ 80% —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ø—É–∫–ª–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ box-shadow

**–û—Ç–∫—Ä—ã—Ç—ã–µ –±–ª–æ–∫–∏** (`[data-slot="accordion-item"][data-state="open"] > div`):
```css
background-image: 
  linear-gradient(
    to bottom,
    rgba(58, 43, 23, 0.50) 0%,
    rgba(52, 36, 20, 0.85) 100%
  ),
  url('/images/services-background.png');
box-shadow: 
  0 6px 16px rgba(0, 0, 0, 0.5),
  0 3px 8px rgba(0, 0, 0, 0.4),
  inset 0 1px 0 rgba(255, 245, 200, 0.15),
  inset 0 -1px 0 rgba(0, 0, 0, 0.25);
```
- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ 85% (–Ω–µ–º–Ω–æ–≥–æ —Ç–µ–º–Ω–µ–µ)
- –ë–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–µ —Ç–µ–Ω–∏

**–¢–µ–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –±–ª–æ–∫–∞** (`[data-slot="accordion-content"][data-state="open"] > div`):
```css
background-image: 
  linear-gradient(
    to bottom,
    rgba(58, 43, 23, 0.48) 0%,
    rgba(52, 36, 20, 0.82) 100%
  ),
  url('/images/services-background.png');
```
- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ 82%
- –ú—è–≥–∫–∏–µ —Ç–µ–Ω–∏

### 5.2 Hover —ç—Ñ—Ñ–µ–∫—Ç—ã

**–ú–µ—Å—Ç–æ:** `AccordionTrigger` (—Å—Ç—Ä–æ–∫–∞ 38)

```typescript
className="... hover:underline ..."
```

- –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ
- `transition-all` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–ª–∞–≤–Ω–æ—Å—Ç—å

### 5.3 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è FAQ

**–ú–µ—Å—Ç–æ:** `src/app/globals.css` (—Å—Ç—Ä–æ–∫–∞ ~172-186)

```css
[data-slot="accordion-content"] {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –≠—Ç–∞ –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –í–°–ï–ú `accordion-content`, –≤–∫–ª—é—á–∞—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–µ–∫—Ü–∏–∏ "naprawy". –û–Ω–∞ –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π Radix UI.

---

## 6Ô∏è‚É£ –ú–µ—Å—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏

### 6.1 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–ú–µ—Å—Ç–æ:** `handleSubcategoryChange` (—Å—Ç—Ä–æ–∫–∞ ~1610-1631)

```typescript
// –£—Å–ª–æ–≤–∏–µ: isClosing && openSection === 'naprawy'
if (isClosing && openSection === 'naprawy') {
  const sectionRef = sectionRefs.current['naprawy']
  if (sectionRef) {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ window.scrollY
    const pageScroll = window.scrollY
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ scrollTop –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    const accordionContentElement = sectionRef.querySelector<HTMLElement>(
      '[data-slot="accordion-content"]'
    )
    const scrollableContainer = findScrollableContainer(accordionContentElement)
    const containerScroll = scrollableContainer.scrollTop
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ ref
    scrollPositionOnCloseRef.current = { pageScroll, containerScroll }
  }
}
```

**–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:**
- –î–û –≤—ã–∑–æ–≤–∞ `setOpenSubcategory`
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –≤ –º–æ–º–µ–Ω—Ç –∫–ª–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è DOM

### 6.2 –ê–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–ú–µ—Å—Ç–æ:** `useEffect` –¥–ª—è `openSubcategory` (—Å—Ç—Ä–æ–∫–∞ ~1709-1748)

```typescript
const lockScrollPosition = () => {
  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ window.scrollY
  if (Math.abs(window.scrollY - savedPositions.pageScroll) > 1) {
    window.scrollTo({ top: savedPositions.pageScroll, behavior: 'auto' })
  }
  
  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ scrollTop –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  if (Math.abs(scrollableContainer.scrollTop - savedPositions.containerScroll) > 1) {
    scrollableContainer.scrollTop = savedPositions.containerScroll
  }
}

scrollLockIntervalRef.current = window.setInterval(lockScrollPosition, 16)
```

**–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤ useEffect
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 16ms –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 350ms

### 6.3 –§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–ú–µ—Å—Ç–æ:** `useEffect` –¥–ª—è `openSubcategory` (—Å—Ç—Ä–æ–∫–∞ ~1760-1800)

```typescript
setTimeout(() => {
  // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
  clearInterval(scrollLockIntervalRef.current)
  
  // –§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  window.scrollTo({ top: finalPositions.pageScroll, behavior: 'auto' })
  scrollableContainer.scrollTop = finalPositions.containerScroll
  
  // –û—á–∏—Å—Ç–∫–∞
  scrollPositionOnCloseRef.current = null
}, 350)
```

**–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:**
- –ß–µ—Ä–µ–∑ 350ms –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CSS-–∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è (~200-300ms)
- –û–¥–∏–Ω —Ä–∞–∑, –≤ –∫–æ–Ω—Ü–µ

### 6.4 –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–ú–µ—Å—Ç–∞:**
1. –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å—Ç—Ä–æ–∫–∞ ~1820-1827)
2. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ–∫—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞ ~1804-1812)
3. –í cleanup —Ñ—É–Ω–∫—Ü–∏–∏ useEffect (—Å—Ç—Ä–æ–∫–∞ ~1837-1841)

```typescript
// –û—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
if (scrollLockIntervalRef.current) {
  clearInterval(scrollLockIntervalRef.current)
  scrollLockIntervalRef.current = null
}

// –û—á–∏—Å—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
scrollPositionOnCloseRef.current = null
```

---

## 7Ô∏è‚É£ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 7.1 –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∞–Ω–∏–º–∞—Ü–∏–π

- CSS –∞–Ω–∏–º–∞—Ü–∏—è `fadeIn` (0.3s) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º `accordion-content`
- Radix UI –∞–Ω–∏–º–∞—Ü–∏—è `animate-accordion-up/down` (~200-300ms)
- –í–æ–∑–º–æ–∂–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–ª–∏ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π

### 7.2 –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. `handleSubcategoryChange` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é
2. `setOpenSubcategory` –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
3. React –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä
4. Radix UI –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç CSS-–∞–Ω–∏–º–∞—Ü–∏—é
5. `useEffect` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–∂–¥—É –ø—É–Ω–∫—Ç–∞–º–∏ 1 –∏ 5 –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –≤—Ä–µ–º—è, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä —É–∂–µ –Ω–∞—á–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É.

### 7.3 –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

- `setInterval` —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 16ms –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä—ã–º
- –ë—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–µ–Ω `requestAnimationFrame` –≤–º–µ—Å—Ç–æ `setInterval`

### 7.4 –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å scrollIntoViewIfNeeded

- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `scrollIntoViewIfNeeded` —Å `behavior: 'smooth'`
- –ï—Å–ª–∏ —Å–µ–∫—Ü–∏—è —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞ –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è, —ç—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
- –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

### 7.5 –ì–ª–æ–±–∞–ª—å–Ω—ã–π scroll-behavior

**–ú–µ—Å—Ç–æ:** `src/app/globals.css` (—Å—Ç—Ä–æ–∫–∞ 7)

```css
html {
  scroll-behavior: smooth;
}
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –≠—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–ª–∞–≤–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å `behavior: 'auto'` –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö.

---

## 8Ô∏è‚É£ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ DOM

```
AccordionItem (section) [ref: sectionRefs.current['naprawy']]
  ‚îî‚îÄ AccordionTrigger (–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏)
  ‚îî‚îÄ AccordionContent [data-slot="accordion-content", max-h-[70vh], overflow-y-auto]
     ‚îî‚îÄ div (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π div —Å overflow-y-auto) ‚Üê scrollableContainer
        ‚îî‚îÄ Accordion (–¥–ª—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π)
           ‚îî‚îÄ AccordionItem (subcategory) [ref: subcategoryRefs.current[...]]
              ‚îî‚îÄ AccordionTrigger (–∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏) [data-slot="accordion-trigger"]
              ‚îî‚îÄ AccordionContent (–∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
                 ‚îî‚îÄ div
                    ‚îî‚îÄ —Ç–∞–±–ª–∏—Ü–∞ —Å —É—Å–ª—É–≥–∞–º–∏
```

**Scrollable –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
- –≠—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `div` –≤–Ω—É—Ç—Ä–∏ `AccordionContent` —Å–µ–∫—Ü–∏–∏
- –ò–º–µ–µ—Ç –∫–ª–∞—Å—Å—ã: `max-h-[70vh] overflow-y-auto scroll-smooth accordion-scroll`
- –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## 9Ô∏è‚É£ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è

- `SECTION_SCROLL_OFFSET = 120` - –æ—Ç—Å—Ç—É–ø –æ—Ç –≤–µ—Ä—Ö–∞ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –∫ —Å–µ–∫—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏: 16ms (60 FPS)
- –í—Ä–µ–º—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 350ms (–ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã—Ç–∏—è)
- –í—Ä–µ–º—è CSS-–∞–Ω–∏–º–∞—Ü–∏–∏: ~200-300ms (Radix UI Accordion)
- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏: ~116-133ms (–¥–≤–æ–π–Ω–æ–π RAF + 100ms)
- –ü–æ—Ä–æ–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏: 1px (–µ—Å–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–µ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)

---

## üîü –†–µ–∑—é–º–µ flow –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

1. **–ö–ª–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Üí `onValueChange(null)`
2. **handleSubcategoryChange** ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ `scrollPositionOnCloseRef.current` (–î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)
3. **setOpenSubcategory(null)** ‚Üí –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è React
4. **React —Ä–µ-—Ä–µ–Ω–¥–µ—Ä** ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
5. **Radix UI** ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `data-state="closed"` ‚Üí –ó–∞–ø—É—Å–∫ CSS-–∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
6. **useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** ‚Üí –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è (`openSubcategory === null && scrollPositionOnCloseRef.current`)
7. **–ó–∞–ø—É—Å–∫ setInterval** ‚Üí –ê–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 16ms
8. **CSS-–∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è** (~200-300ms)
9. **setTimeout 350ms** ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ + —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
10. **–û—á–∏—Å—Ç–∫–∞** ‚Üí `scrollPositionOnCloseRef.current = null`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–∂–¥—É –ø—É–Ω–∫—Ç–∞–º–∏ 2-6 –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã—Å–æ—Ç—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ.



